---
title: BugKu - php加密混淆
# swiper_index: 1
categories:
    -网络安全
tags:
  - php
  - BugKu
  - webshell
abbrlink: 22275
date: 2022-11-6 15:00:00
updated: 2022-11-6 15:00:00
---

{% p h1, BugKu getshell %}
![code](https://source.bugcarrot.top/articles/bugku/web/1.png)

打开页面，一脸茫然，网上搜一搜，php混淆加密，新知识点，什么是混淆加密？
php混淆的作用是对发布的代码进行保护，对代码进行混淆和加密，增加破解者的逆向难度，从而达到保护自己成果的目的


{% tip info %}混淆加密的原理：
举个例子，让代码通过不断重复base64，然后混淆base64_encode,decode函数，最后通过eval解密执行完成，并且加密后的代码不影响运行
{% endtip %}
混淆加密的原理：
![code](https://source.bugcarrot.top/articles/bugku/web/2.png)

上蚁剑
![code](https://source.bugcarrot.top/articles/bugku/web/3.png)

进来了，但是权限过低，命令无法执行，html目录以外的目录无法查看，但是能上传文件

看了WP大佬的思路
![code](https://source.bugcarrot.top/articles/bugku/web/4.png)

查看phpinfo上的open_basedir，原来被限制了

还有disble_functions参数，这是php.ini中的一个设置选项，用来设置php环境禁用某些函数（eval并非php函数，所以放在这里行不通，想要禁用eval需要用php的扩展Suhosin:  安装suhosin后在php.ini中load进来su'hosin.so，再加上suhosin.executor.disable_eval = on即可）

如何绕过diisable_functions ，利用linux上的LD，PRELOAD环境变量，可以看看这篇文章 https://www.freebuf.com/articles/web/280446.htm

这里就使用蚁剑中的插件
![code](https://source.bugcarrot.top/articles/bugku/web/5.png)
![code](https://source.bugcarrot.top/articles/bugku/web/6.png)

接着用这个连上去就搞定了
![code](https://source.bugcarrot.top/articles/bugku/web/7.png)
![code](https://source.bugcarrot.top/articles/bugku/web/8.png)






